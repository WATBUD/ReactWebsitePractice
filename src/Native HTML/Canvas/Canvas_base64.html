<meta charset="utf-8" />
<title>Canvas_to_div_&lt;img&gt;base 64></title>
</head>

<body>
    <img id="imgElement" style="background: radial-gradient(black, transparent);" width="250" height="250" src=""
        alt="">
    <div id="TTTTTTTDiv"
        style="background-size:100% 100%;background: radial-gradient(black, transparent);width: 250px;height: 250px;">
    </div>
    <canvas id="canvas" style="margin-left: 500px;" width="500" height="500" />
    <!-- <div style="background: red;width: 500px;height: 500px;">
        
        
        </div> -->
    </canvas>
</body>
<script type="text/javascript">
    var canvas = document.getElementById("canvas");
    var context = canvas.getContext('2d');
    //context.fillStyle = "red";
    context.font = "30px Arial";
    //context.fillText("Hello World", 10, 50);
    context.fillStyle = "yellow";
    context.fillRect(0, 0, 500, 500);
    context.fillStyle = "red";
    context.textAlign = "center";
    context.fillText("Louis", canvas.width / 2, canvas.height / 2);
    // context.fillStyle = "yellow";
    // // context.strokeStyle = "blue";
    // // context.lineWidth = 150;
    // context.fillRect(50, 50, 500, 500);
    // context.strokeRect(50, 50, 500, 500);	


    // function toDataURL(url, callback) {
    //   var xhr = new XMLHttpRequest();
    //   xhr.onload = function() {
    //     var reader = new FileReader();
    //     reader.onloadend = function() {
    //       callback(reader.result);
    //     }
    //     reader.readAsDataURL(xhr.response);
    //   };
    //   xhr.open('GET', url);
    //   xhr.responseType = 'blob';
    //   xhr.send();
    // }


    // const toDataURL = url => fetch(url)
    //   .then(response => response.blob())
    //   .then(blob => new Promise((resolve, reject) => {
    //     const reader = new FileReader()
    //     reader.onloadend = () => resolve(reader.result)
    //     reader.onerror = reject
    //     reader.readAsDataURL(blob)
    //   }))


    // toDataURL('https://www.gravatar.com/avatar/d50c83cc0c6523b4d3f6085295c953e0')
    //   .then(dataUrl => {
    //     console.log('RESULT:', dataUrl)
    //   })
    // document.getElementById("imgElement").src='FunctionIcon.png'
    // console.log('%c dataURL', 'background: black; color: yellow',document.getElementById("imgElement").src);  

    toDataURL();

    function toDataURL() {
        var canvas = document.getElementById("canvas");
        var dataURL = canvas.toDataURL();
        document.getElementById("imgElement").src = dataURL;


        //-----------------------2-in-1--------------------------------//
        document.getElementById("TTTTTTTDiv").style.background = "url(" + dataURL + ")";
        document.getElementById("TTTTTTTDiv").style.backgroundSize = "100% 100%";
        //-------------------------------------------------------//
        console.log('%c dataURL', 'background: black; color: yellow', dataURL);

        // var z11 = dataURL.split(',');
        // console.log('%c z11', 'background: black; color: yellow', z11);

        var base64String = dataURL.replace('data:image/png;base64,', '');
        console.log('%c base64String', 'background: black; color: yellow', base64String);

        
        // var zzz = dataURLtoBlob(dataURL);
        // console.log('%c zzz', 'background: black; color: yellow', zzz);

        // var enc = window.btoa(dataURL);
        // console.log('%c zzz', 'background: black; color: yellow', zzz);

    }
    function dataURLtoBlob(dataurl) {
        
        var arr = dataurl.split(',');
        var atobStr = atob(arr[1]);//mime = arr[0].match(/:(.*?);/)[1],
        console.log('%c atobStr', 'background: black; color: yellow', atobStr);
        var atobLength = atobStr.length;
        var u8arr = new Uint8Array(atobLength);
        while (atobLength--) {
            u8arr[atobLength] = atobStr.charCodeAt(atobLength);
        }
        return u8arr
    }


</script>